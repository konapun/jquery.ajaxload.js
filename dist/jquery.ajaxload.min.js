!function(r){"use strict";function a(a,e){if("form"!==a.prop("tagName").toLowerCase())throw new Error("ajaxLoad must be called on a form tag (got "+a.prop("tagName")+")");var t=r.extend({url:a.attr("action"),data:{},beforeSubmit:function(){},beforeLoad:function(){},afterLoad:function(){},parseURL:!0,parseMap:{},target:void 0},e),o=this;o.beforeSubmit=[t.beforeSubmit],o.beforeLoad=[t.beforeLoad],o.onLoad=[t.afterLoad],a.submit(function(r){r.preventDefault(),o.load(t)})}function e(a,e){for(var t={start:"[",end:"]"},o="",n=a.split(/(\[|\])/),f=!1,u=0;u<n.length;u++){var i=n[u];switch(i){case t.start:f=!0;break;case t.end:f=!1;break;default:if(f){var d=i;o+=e&&e[d]?e[d]:r(d).val()}else o+=i}}return o}a.prototype.load=function(a){var t=this,o=r.extend({error:function(){}},a);o.parseURL&&(o.url=e(o.url,o.parseMap));for(var n=0;n<t.beforeSubmit.length;n++){var f=t.beforeSubmit[n];if(f(o.url)===!1)return!1}r.ajax({url:o.url,data:o.data,success:function(r){for(var a=0;a<t.beforeLoad.length;a++){var e=t.beforeLoad[a];if(e(r)===!1)return!1}var n=o.target;if(n){n.html(r);for(var f=0;f<t.onLoad.length;f++){var u=t.onLoad[f];u(r)}}},error:function(r){o.error(r)}})},r.fn.ajaxLoad=function(r){return new a(this,r)}}(jQuery);