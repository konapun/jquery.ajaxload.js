!function(r){"use strict";function t(t,a){if("form"!==t.prop("tagName").toLowerCase())throw new Error("ajaxLoad must be called on a form tag (got "+t.prop("tagName")+")");var e=r.extend({url:t.attr("action"),data:{},beforeSubmit:function(){},afterLoad:function(){},parseURL:!0,parseMap:{},target:t},a),o=this;o.beforeSubmit=[e.beforeSubmit],o.onLoad=[e.afterLoad],t.submit(function(r){r.preventDefault(),o.load(e.target,e)})}function a(t,a){for(var e={start:"[",end:"]"},o="",n=t.split(/(\[|\])/),u=!1,f=0;f<n.length;f++){var i=n[f];switch(i){case e.start:u=!0;break;case e.end:u=!1;break;default:if(u){var s=i;o+=a&&a[s]?a[s]:r(s).val()}else o+=i}}return o}t.prototype.load=function(t,e){var o=this,n=r.extend({error:function(){}},e);n.parseURL&&(n.url=a(n.url,n.parseMap));for(var u=0;u<o.beforeSubmit.length;u++){var f=o.beforeSubmit[u];if(f(n.url)===!1)return!1}r.ajax({url:n.url,data:n.data,success:function(r){t.html(r);for(var a=0;a<o.onLoad.length;a++){var e=o.onLoad[a];e(r)}},error:function(r){n.error(r)}})},r.fn.ajaxLoad=function(r){return new t(this,r)}}(jQuery);